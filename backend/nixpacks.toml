[phases.setup]
nixPkgs = ["nodejs-18_x", "python310", "python310Packages.pip", "python310Packages.setuptools", "python310Packages.wheel"]

[phases.install]
cmds = [
  "npm install",
  "python3 -m venv venv",
  "source venv/bin/activate",
  "which pip || which pip3",
  "pip install --upgrade pip setuptools wheel || pip3 install --upgrade pip setuptools wheel",
  "pip install --no-cache-dir -r requirements-core.txt || pip3 install --no-cache-dir -r requirements-core.txt",
  "pip install --no-cache-dir -r requirements-ml.txt || pip3 install --no-cache-dir -r requirements-ml.txt || pip install --no-cache-dir tensorflow-cpu>=2.10.0 opencv-python-headless>=4.6.0 || pip3 install --no-cache-dir tensorflow-cpu>=2.10.0 opencv-python-headless>=4.6.0"
]

[start]
cmd = "bash start.sh"

